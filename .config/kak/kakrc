source "%val{config}/plugins/plug.kak/rc/plug.kak"

plug "andreyorst/smarttab.kak" defer smarttab %{
    # when `backspace' is pressed, 4 spaces are deleted at once
    set-option global softtabstop 4
    # configure text that is being used to represent curent active mode
    set-option global smarttab_expandtab_mode_name 'exp'
    set-option global smarttab_noexpandtab_mode_name 'noexp'
    set-option global smarttab_smarttab_mode_name 'smart
} config %{
    hook global WinSetOption filetype=.* expandtab
    # # these languages will use `expandtab' behavior
    # hook global WinSetOption filetype=(rust|markdown|kak|lisp|scheme|sh|perl) expandtab
    # # these languages will use `noexpandtab' behavior
    # hook global WinSetOption filetype=(makefile|gas) noexpandtab
    # # these languages will use `smarttab' behavior
    # hook global WinSetOption filetype=(c|cpp) smarttab
}

plug "andreyorst/fzf.kak" config %{
    map global normal <c-p> ': fzf-mode<ret>'
}

plug "danr/kakoune-easymotion" config %{
    map global normal <a-g> ':enter-user-mode<space>easymotion<ret>'
}

plug "lePerdu/kakboard" %{
    # hook global WinCreate .* %{ kakboard-enable }
    map global user t ':kakboard-toggle<ret>' -docstring 'Kakboard toggle'
    map global user y ':kakboard-push-clipboard<ret>' -docstring 'Push clipboard'
    map global user p ':kakboard-pull-clipboard<ret>' -docstring 'Push clipboard'
}

plug 'delapouite/kakoune-mirror' %{
  map global user m ': enter-user-mode -lock mirror<ret>' -docstring 'Mirror mode'
}

plug "alexherbo2/prelude.kak"
plug "alexherbo2/connect.kak" config %{
    def connect-nnn %{
    	connect-terminal sh -c '(NNN_OPENER=edit nnn; NNN_OPENER=edit bash)'
    }
    map global user n ': connect-nnn<ret>' -docstring 'NNN'
}

plug "ul/kak-lsp" do %{
    # Install only when it doesn't exist.
    command -v kak-lsp >/dev/null 2>&1 || cargo install --locked --force --path .
}

# plug "lenormf/kakoune-extra"

plug "occivink/kakoune-find"

plug "https://gitlab.com/Screwtapello/kakoune-inc-dec"

map global user c ':edit "%val{config}/kakrc"<ret>' -docstring 'Edit config'
map global user <a-c> ':source "%val{config}/kakrc"<ret>' -docstring 'Source config'
map global user / ':comment-line<ret>' -docstring 'Toggle comment'

declare-user-mode project
map global project b ':make build:debug<ret>' -docstring 'build debug'
map global project r ':make build:debug run<ret>' -docstring 'run debug'
map global normal <=> ':enter-user-mode<space>project<ret>'

# colorscheme base16

source "%val{config}/filetype/haxe.kak"
source "%val{config}/filetype/cocoapods.kak"
source "%val{config}/filetype/gradle.kak"
source "%val{config}/filetype/makefile.kak"

# source "%val{config}/expand-tab.kak"


